# Planning Poker E2E Test Suite

í¬ê´„ì ì¸ WebSocket ê¸°ë°˜ End-to-End í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ì…ë‹ˆë‹¤. ì‹¤ì œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ ì†Œì¼“ í†µì‹ ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ë²”ìœ„

### ğŸ  Room Management (`room-management.test.ts`)
- **ë°© ìƒì„±/ì°¸ê°€**: í˜¸ìŠ¤íŠ¸ ê¶Œí•œ, ê³ ìœ  ID ìƒì„±, í”Œë ˆì´ì–´ ì°¸ê°€
- **í˜¸ìŠ¤íŠ¸ ê´€ë¦¬**: í˜¸ìŠ¤íŠ¸ ì´ì–‘, ìë™ ì¬í• ë‹¹, ê¶Œí•œ ê²€ì¦
- **ë™ê¸°í™”**: ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™”, ë‹¤ì¤‘ í”Œë ˆì´ì–´ ì§€ì›
- **ì •ë¦¬**: ë°© ì •ë¦¬, ì—°ê²° í•´ì œ ì²˜ë¦¬

### ğŸ—³ï¸ Story & Voting (`story-voting.test.ts`)
- **ìŠ¤í† ë¦¬ ê´€ë¦¬**: ìƒì„±, ê¶Œí•œ ê²€ì¦, ë‹¤ì¤‘ ìŠ¤í† ë¦¬
- **íˆ¬í‘œ í”„ë¡œì„¸ìŠ¤**: íˆ¬í‘œ, ë³€ê²½, ê³µê°œ, ì¬ì‹œì‘
- **ì™„ë£Œ ì²˜ë¦¬**: ìµœì¢… í¬ì¸íŠ¸ ì„¤ì •, ìƒíƒœ ì „í™˜
- **ì—£ì§€ ì¼€ì´ìŠ¤**: ì˜ëª»ëœ ê°’, ë™ì‹œ íˆ¬í‘œ, ê´€ì „ì ì²˜ë¦¬

### ğŸŒ Browser Integration (`browser-integration.test.ts`)
- **ì „ì²´ ì‚¬ìš©ì ì—¬ì •**: ë°© ìƒì„±ë¶€í„° íˆ¬í‘œ ì™„ë£Œê¹Œì§€
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: UI ì—…ë°ì´íŠ¸, ìƒíƒœ ë³€ê²½
- **ì˜¤ë¥˜ ì²˜ë¦¬**: ì˜ëª»ëœ ë°© ì½”ë“œ, ì—°ê²° ì˜¤ë¥˜, ì¤‘ë³µ ë‹‰ë„¤ì„
- **ë°˜ì‘í˜•**: ëª¨ë°”ì¼ í„°ì¹˜, ì„±ëŠ¥ ìµœì í™”

### ğŸ’ª Stress Testing (`stress-testing.test.ts`)
- **ê³ ë¶€í•˜**: 50ê°œ ë™ì‹œ ì—°ê²°, ë©”ì‹œì§€ ë²„ìŠ¤íŠ¸
- **ë™ì‹œ ì‘ì—…**: ë‹¤ì¤‘ ë°© ìƒì„±, ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
- **ë©”ëª¨ë¦¬**: ìƒëª…ì£¼ê¸° ìŠ¤íŠ¸ë ˆìŠ¤, ë©”ì‹œì§€ í ë¶€í•˜
- **ë³µêµ¬**: ì—°ê²°/í•´ì œ ì‚¬ì´í´, ì˜¤ë¥˜ ë³µêµ¬
- **ì„±ëŠ¥**: ì‘ë‹µ ì‹œê°„ ë²¤ì¹˜ë§ˆí¬

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì˜ì¡´ì„± ì„¤ì¹˜
```bash
cd e2e
npm install
```

### ê°œë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë°© ê´€ë¦¬ í…ŒìŠ¤íŠ¸
npm run test:room

# íˆ¬í‘œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸  
npm run test:voting

# ë¸Œë¼ìš°ì € í†µí•© í…ŒìŠ¤íŠ¸
npm run test:browser

# ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸
npm run test:stress
```

### ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ëª¨ë“  E2E í…ŒìŠ¤íŠ¸
npm test

# ì‹¤ì‹œê°„ ëª¨ë“œ
npm run test:watch

# UI ëª¨ë“œ
npm run test:ui

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
npm run test:coverage
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### WebSocketTestClient
ì‹¤ì œ WebSocket ì—°ê²°ì„ í†µí•œ í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸:
```typescript
const client = new WebSocketTestClient();
await client.connect();

client.send({
  type: 'ROOM_CREATE',
  payload: { nickname: 'TestUser' }
});

const response = await client.waitForMessage('room:created');
expect(response.payload.room.id).toBeDefined();
```

### í™˜ê²½ ì„¤ì •
ìë™ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì‹œì‘ ë° ì •ë¦¬:
```typescript
beforeAll(async () => {
  await startServer();  // í¬íŠ¸ 8081ì—ì„œ ì„œë²„ ì‹œì‘
  await startClient();  // í¬íŠ¸ 5174ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì‹œì‘
});

afterAll(() => {
  stopServer();
  stopClient();
});
```

### ë¸Œë¼ìš°ì € ìë™í™”
Playwrightë¥¼ í†µí•œ ì‹¤ì œ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸:
```typescript
const browser = await chromium.launch();
const page = await browser.newPage();

await page.goto('http://localhost:5174');
await page.fill('input[placeholder="Enter your nickname"]', 'TestUser');
await page.click('button:has-text("Create Room")');
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ë©”íŠ¸ë¦­

### ì„±ëŠ¥ ê¸°ì¤€
- **í‰ê·  ì‘ë‹µ ì‹œê°„**: < 1ì´ˆ
- **ìµœëŒ€ ì‘ë‹µ ì‹œê°„**: < 5ì´ˆ  
- **ë™ì‹œ ì—°ê²°**: 50ê°œ ì§€ì›
- **ë©”ì‹œì§€ ì²˜ë¦¬**: 100ê°œ/ì´ˆ

### ì»¤ë²„ë¦¬ì§€ ëª©í‘œ
- **ê¸°ëŠ¥ ì»¤ë²„ë¦¬ì§€**: 95%+
- **ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„ë¦¬ì§€**: ëª¨ë“  ì‚¬ìš©ì ì—¬ì •
- **ì˜¤ë¥˜ ìƒí™©**: ëª¨ë“  ì˜ˆì™¸ ì²˜ë¦¬
- **ì„±ëŠ¥ ì„ê³„ê°’**: ëª¨ë“  ë¶€í•˜ ì‹œë‚˜ë¦¬ì˜¤

## ğŸ”§ í…ŒìŠ¤íŠ¸ êµ¬ì„±

### í¬íŠ¸ ì„¤ì •
- **í…ŒìŠ¤íŠ¸ ì„œë²„**: 8081
- **í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸**: 5174
- **WebSocket**: ws://localhost:8081

### íƒ€ì„ì•„ì›ƒ
- **ì „ì²´ í…ŒìŠ¤íŠ¸**: 120ì´ˆ
- **ì—°ê²° ëŒ€ê¸°**: 60ì´ˆ
- **ë©”ì‹œì§€ ëŒ€ê¸°**: 5ì´ˆ
- **ë¸Œë¼ìš°ì € ì‘ì—…**: 10ì´ˆ

### ì¬ì‹œë„ ì •ì±…
- **ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„**: 1íšŒ
- **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: ìë™ ì¬ì—°ê²°
- **ë¸Œë¼ìš°ì € ì˜¤ë¥˜**: ìë™ ë³µêµ¬

## ğŸ“ˆ CI/CD í†µí•©

### GitHub Actions
```yaml
- name: Run E2E Tests
  run: |
    cd e2e
    npm install
    npm test
```

### í…ŒìŠ¤íŠ¸ ê²°ê³¼
- **XML ë¦¬í¬íŠ¸**: JUnit í˜•ì‹
- **HTML ë¦¬í¬íŠ¸**: ìƒì„¸ ê²°ê³¼
- **ì»¤ë²„ë¦¬ì§€**: Codecov ì—°ë™

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### ìƒˆ í…ŒìŠ¤íŠ¸ ì¶”ê°€
1. ì ì ˆí•œ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì„ íƒ
2. `describe` ë¸”ë¡ìœ¼ë¡œ ê·¸ë£¹í™”
3. `beforeEach`ë¡œ ì„¤ì •
4. `afterEach`ë¡œ ì •ë¦¬

### ë””ë²„ê¹…
```bash
# ìƒì„¸ ë¡œê·¸ ì¶œë ¥
DEBUG=* npm test

# ë¸Œë¼ìš°ì € í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ í•´ì œ
HEADLESS=false npm run test:browser

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm test -- --testNamePattern="should create room"
```

### ëª¨ë²” ì‚¬ë¡€
- **ë…ë¦½ì„±**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì 
- **ì •ë¦¬**: ë¦¬ì†ŒìŠ¤ ì •ë¦¬ í•„ìˆ˜
- **íƒ€ì„ì•„ì›ƒ**: ì ì ˆí•œ ëŒ€ê¸° ì‹œê°„
- **ì¬í˜„ì„±**: ì¼ê´€ëœ ê²°ê³¼

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ
- **í¬íŠ¸ ì¶©ëŒ**: ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
- **ì—°ê²° ì‹¤íŒ¨**: ì„œë²„ ì‹œì‘ í™•ì¸
- **íƒ€ì„ì•„ì›ƒ**: ëŒ€ê¸° ì‹œê°„ ì¦ê°€
- **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**: ì •ë¦¬ ì½”ë“œ í™•ì¸

### ë¡œê·¸ ë¶„ì„
```bash
# ì„œë²„ ë¡œê·¸
tail -f server.log

# í´ë¼ì´ì–¸íŠ¸ ë¡œê·¸  
tail -f client.log

# í…ŒìŠ¤íŠ¸ ë¡œê·¸
npm test -- --reporter=verbose
```

## ğŸ“š ì¶”ê°€ ìë£Œ

- [Vitest ë¬¸ì„œ](https://vitest.dev/)
- [Playwright ë¬¸ì„œ](https://playwright.dev/)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
- [Planning Poker API ë¬¸ì„œ](../docs/api.md)

---

**ì†Œì¼“ í†µì‹  ê¸°ë°˜ E2E í…ŒìŠ¤íŠ¸ë¡œ ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ì„ ì™„ë²½í•˜ê²Œ ê²€ì¦í•©ë‹ˆë‹¤.**